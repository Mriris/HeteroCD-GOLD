超参数:
$T$ - 温度参数(用于软化输出分布)
$\alpha_{f}$, $\alpha_{out}$, $\alpha_{a}$ - 特征级、输出级和注意力损失的权重系数
$\beta_{map}$, $\beta_{ch}$, $\beta_{sp}$ - 差异图、通道注意力和空间注意力损失的权重系数
$\lambda_{mse}$, $\lambda_{cos}$ - MSE损失和余弦相似度损失的权重系数

输入:
光学前图像, 光学后图像, SAR后图像

输出:
蒸馏总损失

过程:
// 教师网络处理同源光学前后图像，提取特征
教师_特征1 = 编码器1(光学前图像)
教师_特征2 = 编码器2(光学后图像)

// 学生网络处理异源光学-SAR前后图像，提取特征
学生_特征1 = 编码器1(光学前图像)
学生_特征2 = 编码器3(SAR后图像)

// 应用双向通道注意力增强特征
教师_增强特征1, 教师_增强特征2 = 双向通道注意力(教师_特征1, 教师_特征2)
学生_增强特征1, 学生_增强特征2 = 双向通道注意力(学生_特征1, 学生_特征2)

// 计算差异图和注意力
教师_差异图, 教师_空间注意力, 教师_通道注意力 = 计算差异图注意力(教师_增强特征1, 教师_增强特征2)
学生_差异图, 学生_空间注意力, 学生_通道注意力 = 计算差异图注意力(学生_增强特征1, 学生_增强特征2)

// 解码器生成输出预测
教师_输出 = 解码器(教师_增强特征1, 教师_增强特征2, 教师_差异图, 教师_空间注意力, 教师_通道注意力)
学生_输出 = 解码器(学生_增强特征1, 学生_增强特征2, 学生_差异图, 学生_空间注意力, 学生_通道注意力)

// 输出软化处理
教师_软输出 = softmax(教师_输出 / $T$)
学生_软输出 = softmax(学生_输出 / $T$)

// 计算各种蒸馏损失
特征级损失 = $\lambda_{mse}$ * 均方误差(学生_增强特征1, 教师_增强特征1) + $\lambda_{cos}$ * 余弦相似度损失(学生_增强特征2, 教师_增强特征2)
输出级损失 = KL散度(学生_软输出, 教师_软输出) * $T^{2}$
差异图损失 = 均方误差(学生_差异图, 教师_差异图)
空间注意力损失 = 均方误差(学生_空间注意力, 教师_空间注意力)
通道注意力损失 = 均方误差(学生_通道注意力, 教师_通道注意力)

// 组合差异图注意力损失
注意力损失 = $\beta_{map}$ * 差异图损失 + $\beta_{ch}$ * 通道注意力损失 + $\beta_{sp}$ * 空间注意力损失

// 最终蒸馏损失
蒸馏总损失 = $\alpha_{f}$ * 特征级损失 + $\alpha_{out}$ * 输出级损失 + $\alpha_{a}$ * 注意力损失 